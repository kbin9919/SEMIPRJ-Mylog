<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminMemberMapper">

	<select id="adminLogin" resultType="AdminVo">
		SELECT NO, EMAIL, PASSWORD,
		NICK, ADMIN_YN FROM MEMBER WHERE EMAIL = #{email} AND PASSWORD =
		#{password}
	</select>

	<select id="adminMemberList" resultType="MemberVo">
		SELECT 
			NO
			, EMAIL
			, PASSWORD
			, NICK
			, ENROLL_DATE
    		, INTRODUCTION
    		, DEL_DATE
    		, ADMIN_YN 
		FROM MEMBER     
		ORDER BY NO
	</select>

	<select id="adminSelectMemberList" resultType="MemberVo">
		SELECT 
			NO
			, EMAIL
			, PASSWORD
			, NICK
			, ENROLL_DATE
			, INTRODUCTION
			, DEL_DATE
			, ADMIN_YN 
		FROM MEMBER 
		WHERE EMAIL LIKE '%${searchValue}%' OR NICK LIKE '%${searchValue}%'
	<if test="type == 'email'">
		ORDER BY EMAIL
	</if> 
	<if test="type == 'nick'">
		ORDER BY NICK
	</if> 
	</select>

	<select id="adminSelectMemberDetail" resultType="MemberVo">
		SELECT 
			NO
			, EMAIL
			, PASSWORD
			, NICK
			, ENROLL_DATE
			, INTRODUCTION
			, DEL_DATE
			, ADMIN_YN 
		FROM MEMBER 
		WHERE NO = #{no}
	</select>
	
	<insert id="warningMember">
		INSERT INTO WARNING(NO, WARNING_NO, MEMBER_NO) VALUES(SEQ_WARNING.NEXTVAL, #{warningNo}, #{memberNo})
	</insert>
	
	<update id="deleteMember">
		UPDATE MEMBER SET DEL_DATE = SYSDATE WHERE NO = #{memberNo}
	</update>

</mapper>